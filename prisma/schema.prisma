// 1. Prisma Client를 생성하기 위한 설정
generator client {
  provider = "prisma-client-js"
}

// 2. 데이터베이스 연결 설정 (PostgreSQL)
datasource db {
  provider = "postgresql"
}

// 3. 게시글 모델 (설계도)
model Post {
  id        Int      @id @default(autoincrement())
  title     String
  content   String   @db.Text
  nickname  String
  password  String
  view      Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // 추가: 이 게시글에 달린 댓글들 (1:N 관계)
  comments Comment[]
}

model Comment {
  id        Int      @id @default(autoincrement())
  content   String   @db.Text
  nickname  String
  password  String
  createdAt DateTime @default(now())

  isDeleted Boolean   @default(false) // 삭제 여부 상태값
  deletedAt DateTime? // 삭제된 시점 (선택 사항이지만 관리용으로 좋음)

  // 추가: 어느 게시글의 댓글인지 연결
  postId Int
  post   Post @relation(fields: [postId], references: [id], onDelete: Cascade)
}
